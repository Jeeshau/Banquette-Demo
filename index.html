<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>调节相机角度 / 距离</title>
  <style>
    html, body { height: 100%; margin: 0; background: #000; overflow: hidden; }
    model-viewer { width: 100%; height: 100%; background: transparent; }
    .panel {
      position: absolute; left: 12px; top: 12px;
      background: rgba(0,0,0,.6); color:#fff;
      padding: 10px; border-radius: 10px;
      font: 13px sans-serif; line-height: 1.4;
    }
    .row { margin-bottom: 8px; }
    .row input[type=range] { width: 180px; }
    .row input[type=number] { width: 60px; }
    label { display: inline-block; width: 70px; }
  </style>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>
<body>
  <model-viewer id="mv"
    src="./model003.glb"
    camera-controls
    field-of-view="20deg"
    camera-orbit="0deg 60deg 150in"
    camera-target="0m 0.889m 0m"
    style="background: transparent;">
  </model-viewer>

  <div class="panel">
    <div class="row">
      <label>θ (水平)</label>
      <input type="range" id="theta" min="-180" max="180" step="1" value="0">
      <input type="number" id="thetaNum" min="-180" max="180" step="1" value="0">
    </div>
    <div class="row">
      <label>φ (俯仰)</label>
      <input type="range" id="phi" min="0" max="90" step="1" value="60">
      <input type="number" id="phiNum" min="0" max="90" step="1" value="60">
    </div>
    <div class="row">
      <label>r (距离)</label>
      <input type="range" id="radius" min="10" max="600" step="1" value="150">
      <input type="number" id="radiusNum" min="10" max="600" step="1" value="150">
    </div>
    <div class="row">
      <label>Target Y</label>
      <input type="range" id="targetY" min="-120" max="120" step="1" value="35">
      <input type="number" id="targetYNum" min="-120" max="120" step="1" value="35">
    </div>
    <div class="row">
      <label><input type="checkbox" id="hdr"> HDRI</label>
    </div>
  </div>

  <script>
    const mv = document.getElementById('mv');
    const inToM = inch => inch * 0.0254;

    function updateOrbit() {
      const t = document.getElementById('theta').value;
      const p = document.getElementById('phi').value;
      const r = document.getElementById('radius').value;
      mv.cameraOrbit = `${t}deg ${p}deg ${r}in`;
    }
    function updateTarget() {
      const y = document.getElementById('targetY').value;
      mv.cameraTarget = `0m ${inToM(y)}m 0m`;
    }

    function bind(rangeId, numId, cb) {
      const range = document.getElementById(rangeId);
      const num   = document.getElementById(numId);
      range.addEventListener('input', () => { num.value = range.value; cb(); });
      num.addEventListener('input', () => { range.value = num.value; cb(); });
    }

    bind('theta','thetaNum', updateOrbit);
    bind('phi','phiNum', updateOrbit);
    bind('radius','radiusNum', updateOrbit);
    bind('targetY','targetYNum', updateTarget);

    document.getElementById('hdr').addEventListener('change', e => {
      if (e.target.checked) {
        mv.setAttribute('environment-image','./Background_sculpture_exhibition_4k.hdr');
        mv.setAttribute('skybox-image','./Background_sculpture_exhibition_4k.hdr');
      } else {
        mv.removeAttribute('environment-image');
        mv.removeAttribute('skybox-image');
      }
    });
  </script>
</body>
</html>
